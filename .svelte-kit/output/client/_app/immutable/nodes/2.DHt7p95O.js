import"../chunks/DsnmJJEf.js";import{i as $r}from"../chunks/BHHo70b1.js";import{w as Rr,o as Or,e as ie,a as D}from"../chunks/C4PRqRjh.js";import{j as Un,b as Hr,aT as $n,g as jt,h as ye,af as Wr,d as jr,w as e,aH as qr,r as Vr,H as Gr,e as Mn,i as qt,o as tt,Y as Yr,an as Kr,k as en,m as Qr,aU as bt,aV as vt,l as Ve,W as An,v as F,R as Tn,ak as Rn,ad as On,n as Hn,p as Jr,aW as Xr,aX as Vt,V as Wn,a4 as jn,aY as Zr,aa as ea,aZ as ta,aj as na,a_ as ra,X as aa,t as oa,a$ as ia,b0 as sa,b1 as qn,aC as la,b2 as ua,b3 as ca,b4 as da,aB as fa,B as P,S as pa,b5 as ma,J as ya,b6 as ue,b7 as ha,K as R,N as f,P as m,L as Y,a as U,M as ba,x as i,O as d,a5 as Cn,f as Gt,c as va,b8 as ga}from"../chunks/BmcGoB79.js";import{i as se,s as _a,a as wa}from"../chunks/BntuhCxf.js";function Ce(r,t){return t}function xa(r,t,n){for(var s=r.items,l=[],u=t.length,p=0;p<u;p++)ta(t[p].e,l,!0);var k=u>0&&l.length===0&&n!==null;if(k){var _=n.parentNode;na(_),_.append(n),s.clear(),_e(r,t[0].prev,t[u-1].next)}ra(l,()=>{for(var E=0;E<u;E++){var w=t[E];k||(s.delete(w.k),_e(r,w.prev,w.next)),jn(w.e,!k)}})}function Be(r,t,n,s,l,u=null){var p=r,k={flags:t,items:new Map,first:null},_=(t&$n)!==0;if(_){var E=r;p=ye?jt(Wr(E)):E.appendChild(Un())}ye&&jr();var w=null,z=!1,$=new Map,N=qr(()=>{var q=n();return On(q)?q:q==null?[]:Rn(q)}),v,M;function A(){ka(M,v,k,$,p,l,t,s,n),u!==null&&(v.length===0?w?Hn(w):w=en(()=>u(p)):w!==null&&Jr(w,()=>{w=null}))}Hr(()=>{M??=aa,v=e(N);var q=v.length;if(z&&q===0)return;z=q===0;let B=!1;if(ye){var I=Vr(p)===Gr;I!==(q===0)&&(p=Mn(),jt(p),qt(!1),B=!0)}if(ye){for(var K=null,T,g=0;g<q;g++){if(tt.nodeType===Yr&&tt.data===Kr){p=tt,B=!0,qt(!1);break}var x=v[g],V=s(x,g);T=tn(tt,k,K,null,x,V,g,l,t,n),k.items.set(V,T),K=T}q>0&&jt(Mn())}if(ye)q===0&&u&&(w=en(()=>u(p)));else if(Qr()){var re=new Set,Z=Ve;for(g=0;g<q;g+=1){x=v[g],V=s(x,g);var O=k.items.get(V)??$.get(V);O?(t&(bt|vt))!==0&&Vn(O,x,g,t):(T=tn(null,k,null,null,x,V,g,l,t,n,!0),$.set(V,T)),re.add(V)}for(const[Q,ee]of k.items)re.has(Q)||Z.skipped_effects.add(ee.e);Z.add_callback(A)}else A();B&&qt(!0),e(N)}),ye&&(p=tt)}function ka(r,t,n,s,l,u,p,k,_){var E=(p&Zr)!==0,w=(p&(bt|vt))!==0,z=t.length,$=n.items,N=n.first,v=N,M,A=null,q,B=[],I=[],K,T,g,x;if(E)for(x=0;x<z;x+=1)K=t[x],T=k(K,x),g=$.get(T),g!==void 0&&(g.a?.measure(),(q??=new Set).add(g));for(x=0;x<z;x+=1){if(K=t[x],T=k(K,x),g=$.get(T),g===void 0){var V=s.get(T);if(V!==void 0){s.delete(T),$.set(T,V);var re=A?A.next:v;_e(n,A,V),_e(n,V,re),Yt(V,re,l),A=V}else{var Z=v?v.e.nodes_start:l;A=tn(Z,n,A,A===null?n.first:A.next,K,T,x,u,p,_)}$.set(T,A),B=[],I=[],v=A.next;continue}if(w&&Vn(g,K,x,p),(g.e.f&Vt)!==0&&(Hn(g.e),E&&(g.a?.unfix(),(q??=new Set).delete(g))),g!==v){if(M!==void 0&&M.has(g)){if(B.length<I.length){var O=I[0],Q;A=O.prev;var ee=B[0],te=B[B.length-1];for(Q=0;Q<B.length;Q+=1)Yt(B[Q],O,l);for(Q=0;Q<I.length;Q+=1)M.delete(I[Q]);_e(n,ee.prev,te.next),_e(n,A,ee),_e(n,te,O),v=O,A=te,x-=1,B=[],I=[]}else M.delete(g),Yt(g,v,l),_e(n,g.prev,g.next),_e(n,g,A===null?n.first:A.next),_e(n,A,g),A=g;continue}for(B=[],I=[];v!==null&&v.k!==T;)(v.e.f&Vt)===0&&(M??=new Set).add(v),I.push(v),v=v.next;if(v===null)continue;g=v}B.push(g),A=g,v=g.next}if(v!==null||M!==void 0){for(var le=M===void 0?[]:Rn(M);v!==null;)(v.e.f&Vt)===0&&le.push(v),v=v.next;var we=le.length;if(we>0){var xe=(p&$n)!==0&&z===0?l:null;if(E){for(x=0;x<we;x+=1)le[x].a?.measure();for(x=0;x<we;x+=1)le[x].a?.fix()}xa(n,le,xe)}}E&&Wn(()=>{if(q!==void 0)for(g of q)g.a?.apply()}),r.first=n.first&&n.first.e,r.last=A&&A.e;for(var ke of s.values())jn(ke.e);s.clear()}function Vn(r,t,n,s){(s&bt)!==0&&An(r.v,t),(s&vt)!==0?An(r.i,n):r.i=n}function tn(r,t,n,s,l,u,p,k,_,E,w){var z=(_&bt)!==0,$=(_&Xr)===0,N=z?$?F(l,!1,!1):Tn(l):l,v=(_&vt)===0?p:Tn(p),M={i:v,v:N,k:u,a:null,e:null,prev:n,next:s};try{if(r===null){var A=document.createDocumentFragment();A.append(r=Un())}return M.e=en(()=>k(r,N,v,E),ye),M.e.prev=n&&n.e,M.e.next=s&&s.e,n===null?w||(t.first=M):(n.next=M,n.e.next=M.e),s!==null&&(s.prev=M,s.e.prev=M.e),M}finally{}}function Yt(r,t,n){for(var s=r.next?r.next.e.nodes_start:n,l=t?t.e.nodes_start:n,u=r.e.nodes_start;u!==null&&u!==s;){var p=ea(u);l.before(u),u=p}}function _e(r,t,n){t===null?r.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Sa(r,t){return r==null?null:String(r)}function Bn(r,t,n,s){var l=r.__style;if(ye||l!==t){var u=Sa(t);(!ye||u!==r.getAttribute("style"))&&(u==null?r.removeAttribute("style"):r.style.cssText=u),r.__style=t}return s}function nt(r,t,n=!1){if(r.multiple){if(t==null)return;if(!On(t))return ia();for(var s of r.options)s.selected=t.includes(rt(s));return}for(s of r.options){var l=rt(s);if(sa(l,t)){s.selected=!0;return}}(!n||t!==void 0)&&(r.selectedIndex=-1)}function ht(r){var t=new MutationObserver(()=>{nt(r,r.__value)});t.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),oa(()=>{t.disconnect()})}function Pa(r,t,n=t){var s=!0;qn(r,"change",l=>{var u=l?"[selected]":":checked",p;if(r.multiple)p=[].map.call(r.querySelectorAll(u),rt);else{var k=r.querySelector(u)??r.querySelector("option:not([disabled])");p=k&&rt(k)}n(p)}),la(()=>{var l=t();if(nt(r,l,s),s&&l===void 0){var u=r.querySelector(":checked");u!==null&&(l=rt(u),n(l))}r.__value=l,s=!1}),ht(r)}function rt(r){return"__value"in r?r.__value:r.value}const Fa=Symbol("is custom element"),Ea=Symbol("is html");function mt(r){if(ye){var t=!1,n=()=>{if(!t){if(t=!0,r.hasAttribute("value")){var s=r.value;In(r,"value",null),r.value=s}if(r.hasAttribute("checked")){var l=r.checked;In(r,"checked",null),r.checked=l}}};r.__on_r=n,Wn(n),ua()}}function Na(r,t){t?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function In(r,t,n,s){var l=Ma(r);ye&&(l[t]=r.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&r.nodeName==="LINK")||l[t]!==(l[t]=n)&&(t==="loading"&&(r[ca]=n),r.removeAttribute(t))}function Ma(r){return r.__attributes??={[Fa]:r.nodeName.includes("-"),[Ea]:r.namespaceURI===da}}function yt(r,t,n=t){var s=new WeakSet;qn(r,"input",async l=>{var u=l?r.defaultValue:r.value;if(u=Kt(r)?Qt(u):u,n(u),Ve!==null&&s.add(Ve),await fa(),u!==(u=t())){var p=r.selectionStart,k=r.selectionEnd;r.value=u??"",k!==null&&(r.selectionStart=p,r.selectionEnd=Math.min(k,r.value.length))}}),(ye&&r.defaultValue!==r.value||P(t)==null&&r.value)&&(n(Kt(r)?Qt(r.value):r.value),Ve!==null&&s.add(Ve)),pa(()=>{var l=t();if(r===document.activeElement){var u=ma??Ve;if(s.has(u))return}Kt(r)&&l===Qt(r.value)||r.type==="date"&&!l&&!r.value||l!==r.value&&(r.value=l??"")})}function Kt(r){var t=r.type;return t==="number"||t==="range"}function Qt(r){return r===""?null:+r}function zn(r){return function(...t){var n=t[0];return n.preventDefault(),r?.apply(this,t)}}const nn=Rr([]),Aa=nn;let Jt=null,Xt=null;function at(){return Jt||(Jt=(async()=>{const t=await(await Ge()).list();nn.set(Gn(t))})()),Jt}async function Ta(r){await at();const t=await Ge(),n=Date.now(),s={id:crypto.randomUUID(),name:r.name.trim()||"Pack sin nombre",createdAt:n,updatedAt:n,phrases:r.phrases};return await t.save(s),await rn(),s}async function Ca(r,t,n={}){await at();const s=await Ge(),l=await s.get(r);if(!l)throw new Error("Pack no encontrado");const u={...l,name:n.updateName?.trim()||l.name,updatedAt:Date.now(),phrases:[...l.phrases,t]};return await s.save(u),await rn(),u}async function Ba(r){await at(),await(await Ge()).delete(r),await rn()}async function Ia(r,t){await at();const s=await(await Ge()).get(r);if(s)return s.phrases.find(l=>l.id===t)}async function rn(){const t=await(await Ge()).list();nn.set(Gn(t))}function Gn(r){return[...r].sort((t,n)=>n.updatedAt-t.updatedAt)}async function Ge(){return Xt||(Xt=(async()=>{const r=await za();return r||La()})()),Xt}async function za(){const r=navigator.storage;if(!r?.getDirectory)return null;try{const n=await(await r.getDirectory()).getDirectoryHandle("phrase-packs",{create:!0});return{list:async()=>{const s=[];for await(const l of n.entries()){const[u,p]=l;if(!u.endsWith(".json"))continue;const E=await(await p.getFile()).text();s.push(JSON.parse(E))}return s},save:async s=>{const u=await(await n.getFileHandle(`${s.id}.json`,{create:!0})).createWritable();await u.write(JSON.stringify(s)),await u.close()},delete:async s=>{try{await n.removeEntry(`${s}.json`)}catch(l){if(l?.name!=="NotFoundError")throw l}},get:async s=>{try{const u=await(await n.getFileHandle(`${s}.json`)).getFile();return JSON.parse(await u.text())}catch(l){if(l?.name==="NotFoundError")return;throw l}}}}catch(t){return console.warn("Fallo OPFS, usando IndexedDB",t),null}}function La(){return new Promise((r,t)=>{const n=indexedDB.open("doremix",1);n.onupgradeneeded=()=>{const s=n.result;s.objectStoreNames.contains("phrasePacks")||s.createObjectStore("phrasePacks",{keyPath:"id"})},n.onerror=()=>{t(n.error??new Error("Error al abrir IndexedDB"))},n.onsuccess=()=>{const s=n.result;s.onversionchange=()=>{s.close()},r({list:()=>new Promise((u,p)=>{const E=s.transaction("phrasePacks","readonly").objectStore("phrasePacks").getAll();E.onsuccess=()=>u(E.result),E.onerror=()=>p(E.error)}),save:u=>new Promise((p,k)=>{const _=s.transaction("phrasePacks","readwrite");_.oncomplete=()=>p(),_.onerror=()=>k(_.error),_.objectStore("phrasePacks").put(u)}),delete:u=>new Promise((p,k)=>{const _=s.transaction("phrasePacks","readwrite");_.oncomplete=()=>p(),_.onerror=()=>k(_.error),_.objectStore("phrasePacks").delete(u)}),get:u=>new Promise((p,k)=>{const E=s.transaction("phrasePacks","readonly").objectStore("phrasePacks").get(u);E.onsuccess=()=>p(E.result),E.onerror=()=>k(E.error)})})}})}class qe extends Error{constructor(t){super(t),this.name="SMFParseError"}}const Da=1297377380,Ua=1297379947;function $a(r){const t=new DataView(r);let n=0;if(t.getUint32(n)!==Da)throw new qe("Archivo SMF inválido (cabecera incorrecta).");n+=4;const l=t.getUint32(n);if(n+=4,l!==6)throw new qe("Cabecera SMF con longitud inesperada.");const u=t.getUint16(n);n+=2;const p=t.getUint16(n);n+=2;const k=t.getUint16(n);if(n+=2,k&32768)throw new qe("Formato SMPTE no soportado, solo PPQ.");const _=k,E=[],w=[];let z,$=0;for(let M=0;M<p&&!(n>=t.byteLength);M++){const A=t.getUint32(n);if(n+=4,A!==Ua)throw new qe("Chunk de pista no encontrado.");const q=t.getUint32(n);n+=4;const B=n+q;let I=0,K=0;for(;n<B;){const T=Zt(t,n);I+=T.value,n=T.offset;const g=t.getUint8(n);if(g>=128&&(K=g,n+=1),K===255){const re=t.getUint8(n);n+=1;const Z=Zt(t,n),O=Z.value;n=Z.offset;const Q=n;if(n+=O,re===81&&O===3){const ee=t.getUint8(Q)<<16|t.getUint8(Q+1)<<8|t.getUint8(Q+2);z=Math.round(6e7/ee*100)/100}else if(re===3){const ee=new Uint8Array(r,Q,O),le=new TextDecoder().decode(ee).trim();le&&w.push(le)}continue}if(K===240||K===247){const re=Zt(t,n),Z=re.value;n=re.offset+Z;continue}if(K===0)throw new qe("Estado MIDI inválido en el archivo.");const x=K&240,V=K&15;switch(x){case 128:case 144:{const re=t.getUint8(n),Z=t.getUint8(n+1);n+=2;const O=I/_;x===144&&Z!==0?E.push({beat:O,type:"noteon",note:re,velocity:Z/127,channel:V}):E.push({beat:O,type:"noteoff",note:re,channel:V});break}case 160:case 176:case 224:{n+=2;break}case 192:case 208:{n+=1;break}default:throw new qe("Evento MIDI desconocido.")}I>$&&($=I)}n=B}E.sort((M,A)=>M.beat-A.beat);const N=E.map(M=>{const{channel:A,...q}=M;return q});return{metadata:{formatType:u,trackCount:p,ticksPerQuarter:_,tempoBpm:z,trackNames:w,durationBeats:$/_},events:N}}function Zt(r,t){let n=0,s=0;do s=r.getUint8(t++),n=n<<7|s&127;while(s&128);return{value:n,offset:t}}const Ln="/fluidsynth/fluidsynth.js",Ra="/fluidsynth/fluidsynth.wasm";class Oa{audioContext;options;module=null;functions=null;settingsPtr=null;synthPtr=null;workletNode=null;initialized=!1;initializing=null;scriptLoaded=null;status={ready:!1,soundFontLoaded:!1,lastError:null};soundFontInfo=null;soundFontsPath="/soundfonts";fsReady=!1;blockSize;leftPtr=null;rightPtr=null;isRendering=!1;isPlaying=!1;pendingTimers=[];channel=0;constructor(t,n={}){this.audioContext=t,this.options=n,this.blockSize=n.blockSize??256}getStatus(){return{...this.status}}getSoundFontName(){return this.soundFontInfo?.name}async ensureInitialized(){if(!this.initialized){if(this.initializing)return this.initializing;this.initializing=this.initializeInternal();try{await this.initializing}finally{this.initializing=null}}}async loadSoundFontFromFile(t){const n=await t.arrayBuffer();await this.loadSoundFontFromBuffer(n,t.name)}async loadSoundFontFromUrl(t,n="gm.sf2"){const s=await fetch(t);if(!s.ok)throw new Error(`No se pudo descargar el SoundFont desde ${t}`);const l=await s.arrayBuffer();await this.loadSoundFontFromBuffer(l,n)}async playClip(t,n){if(await this.ensureInitialized(),!this.soundFontInfo)throw new Error("Carga un SoundFont GM (.sf2) antes de reproducir.");if(!this.functions||this.synthPtr===null)throw new Error("FluidSynth no está listo.");await this.stop(),this.isRendering=!0,this.isPlaying=!0,this.renderMore(8);const s=60/n,l=this.audioContext.currentTime+.1;for(const u of t){const p=l+u.beat*s,k=Math.max(0,(p-this.audioContext.currentTime)*1e3),_=setTimeout(()=>{if(!(!this.isPlaying||this.synthPtr===null||!this.functions))if(u.type==="noteon"){const E=Math.max(0,Math.min(1,u.velocity??.8));this.functions.noteOn(this.synthPtr,this.channel,u.note,Math.round(E*127))}else u.type==="noteoff"&&this.functions.noteOff(this.synthPtr,this.channel,u.note)},k);this.pendingTimers.push(_)}return l}async stop(){if(this.isPlaying=!1,this.pendingTimers.forEach(t=>clearTimeout(t)),this.pendingTimers=[],this.functions&&this.synthPtr!==null){if(this.functions.allNotesOff)for(let t=0;t<16;t++)this.functions.allNotesOff(this.synthPtr,t);else if(this.functions.controlChange)for(let t=0;t<16;t++)this.functions.controlChange(this.synthPtr,t,123,0)}this.workletNode&&this.workletNode.port.postMessage({type:"flush"}),this.isRendering=!1}dispose(){if(this.stop(),this.workletNode){try{this.workletNode.disconnect()}catch{}this.workletNode=null}if(this.module&&this.leftPtr!==null&&(this.module._free(this.leftPtr),this.leftPtr=null),this.module&&this.rightPtr!==null&&(this.module._free(this.rightPtr),this.rightPtr=null),this.functions){if(this.synthPtr!==null){try{this.functions.deleteSynth(this.synthPtr)}catch{}this.synthPtr=null}if(this.settingsPtr!==null){try{this.functions.deleteSettings(this.settingsPtr)}catch{}this.settingsPtr=null}}this.initialized=!1}async initializeInternal(){try{await this.ensureWorklet(),await this.ensureModule(),this.setupSynth(),this.status.ready=!0,this.status.lastError=null,this.initialized=!0}catch(t){const n=t.message??"Error inicializando FluidSynth.";throw this.status.lastError=n,t}}async ensureWorklet(){this.workletNode||(await this.audioContext.audioWorklet.addModule("/fluid-render.worklet.js"),this.workletNode=new AudioWorkletNode(this.audioContext,"fluid-renderer",{numberOfOutputs:1,outputChannelCount:[2]}),this.workletNode.port.onmessage=t=>{(t.data||{}).type==="need-audio"&&this.isRendering&&this.renderMore(6)},this.workletNode.connect(this.audioContext.destination))}async ensureModule(){if(this.module)return this.module;this.scriptLoaded||(this.scriptLoaded=Wa(this.options.scriptUrl??Ln)),await this.scriptLoaded;const t=await ja({scriptUrl:this.options.scriptUrl??Ln,wasmUrl:this.options.wasmUrl??Ra});return t.ready&&typeof t.ready.then=="function"&&await t.ready,this.module=t,this.module}setupSynth(){if(!this.module)throw new Error("Módulo FluidSynth no disponible.");const t=(n,s,l)=>{try{return this.module.cwrap(n,s,l)}catch{throw new Error(`No se pudo enlazar la función ${n}. Asegúrate de exportarla al compilar FluidSynth.`)}};if(this.functions={newSettings:t("new_fluid_settings","number",[]),deleteSettings:t("delete_fluid_settings","void",["number"]),newSynth:t("new_fluid_synth","number",["number"]),deleteSynth:t("delete_fluid_synth","void",["number"]),setNum:t("fluid_settings_setnum","number",["number","string","number"]),setInt:Ie(this.module,"fluid_settings_setint","number",["number","string","number"]),setStr:Ie(this.module,"fluid_settings_setstr","number",["number","string","string"]),sfload:t("fluid_synth_sfload","number",["number","string","number"]),sfunload:Ie(this.module,"fluid_synth_sfunload","number",["number","number","number"]),noteOn:t("fluid_synth_noteon","number",["number","number","number","number"]),noteOff:t("fluid_synth_noteoff","number",["number","number","number"]),allNotesOff:Ie(this.module,"fluid_synth_all_notes_off","number",["number","number"]),programSelect:Ie(this.module,"fluid_synth_program_select","number",["number","number","number","number","number"]),programReset:Ie(this.module,"fluid_synth_program_reset","number",["number"]),systemReset:Ie(this.module,"fluid_synth_system_reset","number",["number"]),controlChange:Ie(this.module,"fluid_synth_cc","number",["number","number","number","number"]),writeFloat:t("fluid_synth_write_float","number",["number","number","number","number","number","number","number","number"])},this.settingsPtr=this.functions.newSettings(),!this.settingsPtr)throw new Error("No se pudo crear la configuración de FluidSynth.");if(this.functions.setNum(this.settingsPtr,"synth.sample-rate",this.audioContext.sampleRate),this.functions.setNum(this.settingsPtr,"synth.gain",.8),this.functions.setNum(this.settingsPtr,"synth.polyphony",128),this.functions.setInt&&this.functions.setInt(this.settingsPtr,"synth.threadsafe-api",0),this.functions.setStr&&this.functions.setStr(this.settingsPtr,"synth.cpu-cores","1"),this.synthPtr=this.functions.newSynth(this.settingsPtr),!this.synthPtr)throw new Error("No se pudo crear la instancia de FluidSynth.");if(this.functions.programReset&&this.functions.programReset(this.synthPtr),this.functions.systemReset&&this.functions.systemReset(this.synthPtr),this.leftPtr=this.module._malloc(this.blockSize*Float32Array.BYTES_PER_ELEMENT),this.rightPtr=this.module._malloc(this.blockSize*Float32Array.BYTES_PER_ELEMENT),this.leftPtr===null||this.rightPtr===null)throw new Error("No se pudo reservar memoria para el búfer de audio.")}async loadSoundFontFromBuffer(t,n){if(await this.ensureInitialized(),!this.module||!this.functions||this.synthPtr===null)throw new Error("FluidSynth no está inicializado.");this.fsReady||(this.module.FS_createPath("/",this.soundFontsPath.replace(/^\//,""),!0,!0),this.fsReady=!0);const s=Ha(n||"soundfont.sf2"),l=`${Date.now()}-${s}`,u=this.soundFontsPath.replace(/^\//,"");this.module.FS_createDataFile(u?`/${u}`:"/",l,new Uint8Array(t),!0,!0,!1);const p=`${this.soundFontsPath}/${l}`;if(this.soundFontInfo&&this.functions.sfunload&&(this.functions.sfunload(this.synthPtr,this.soundFontInfo.id,0),this.module.FS_unlink))try{this.module.FS_unlink(this.soundFontInfo.path)}catch{}const k=this.functions.sfload(this.synthPtr,p,1);if(k<0)throw new Error("No se pudo cargar el SoundFont en FluidSynth.");this.soundFontInfo={id:k,path:p,name:n},this.functions.programSelect&&this.functions.programSelect(this.synthPtr,this.channel,k,0,0),this.status.soundFontLoaded=!0,this.status.soundFontName=n,this.status.lastError=null}renderMore(t){if(!this.module||!this.functions||this.synthPtr===null||this.leftPtr===null||this.rightPtr===null||!this.workletNode||t<=0)return;const n=this.module.HEAPF32,s=this.leftPtr>>2,l=this.rightPtr>>2;for(let u=0;u<t;u++){this.functions.writeFloat(this.synthPtr,this.blockSize,this.leftPtr,0,1,this.rightPtr,0,1);const p=n.slice(s,s+this.blockSize),k=n.slice(l,l+this.blockSize);this.workletNode.port.postMessage({type:"audio",left:p.buffer,right:k.buffer},[p.buffer,k.buffer])}}}function Ha(r){return r.replace(/[^a-zA-Z0-9._-]+/g,"_")}async function Wa(r){document.querySelector(`script[data-fluidsynth="${r}"]`)||await new Promise((t,n)=>{const s=document.createElement("script");s.src=r,s.async=!0,s.dataset.fluidsynth=r,s.onload=()=>t(),s.onerror=()=>n(new Error(`No se pudo cargar fluidsynth.js desde ${r}. Copia los binarios en /static/fluidsynth/.`)),document.head.appendChild(s)})}async function ja(r){const t=globalThis,n=[t.createFluidSynthModule,t.FluidSynthModule,t.createModule,t.Module].filter(p=>typeof p=="function");if(!n.length)throw new Error("No se encontró la factoría de FluidSynth. Asegúrate de exponer createFluidSynthModule o Module en fluidsynth.js.");const s=n[0],l=s({locateFile:p=>p.endsWith(".wasm")?r.wasmUrl:p.startsWith("/")?p:`${r.scriptUrl.substring(0,r.scriptUrl.lastIndexOf("/")+1)}${p}`});return l&&typeof l.then=="function"?await l:l}function Ie(r,t,n,s){try{return r.cwrap(t,n,s)}catch{return}}function ze(r,t,n){return{id:r,name:t,bpm:120,events:n}}const qa=[{beat:0,type:"noteon",note:36,velocity:1},{beat:.25,type:"noteon",note:42,velocity:.8},{beat:.5,type:"noteon",note:38,velocity:.9},{beat:.75,type:"noteon",note:42,velocity:.8},{beat:1,type:"noteon",note:36,velocity:1},{beat:1.25,type:"noteon",note:42,velocity:.8},{beat:1.5,type:"noteon",note:38,velocity:.9},{beat:1.75,type:"noteon",note:46,velocity:.8},{beat:2,type:"noteon",note:36,velocity:1},{beat:2.25,type:"noteon",note:42,velocity:.8},{beat:2.5,type:"noteon",note:38,velocity:.9},{beat:2.75,type:"noteon",note:42,velocity:.8},{beat:3,type:"noteon",note:36,velocity:1},{beat:3.25,type:"noteon",note:44,velocity:.7},{beat:3.5,type:"noteon",note:38,velocity:.9},{beat:3.75,type:"noteon",note:46,velocity:.8},{beat:.01,type:"noteoff",note:36},{beat:.26,type:"noteoff",note:42},{beat:.51,type:"noteoff",note:38},{beat:.76,type:"noteoff",note:42},{beat:1.01,type:"noteoff",note:36},{beat:1.26,type:"noteoff",note:42},{beat:1.51,type:"noteoff",note:38},{beat:1.76,type:"noteoff",note:46},{beat:2.01,type:"noteoff",note:36},{beat:2.26,type:"noteoff",note:42},{beat:2.51,type:"noteoff",note:38},{beat:2.76,type:"noteoff",note:42},{beat:3.01,type:"noteoff",note:36},{beat:3.26,type:"noteoff",note:44},{beat:3.51,type:"noteoff",note:38},{beat:3.76,type:"noteoff",note:46}],Va=[{beat:0,type:"noteon",note:36,velocity:1},{beat:.5,type:"noteon",note:42,velocity:.8},{beat:1,type:"noteon",note:38,velocity:.9},{beat:1.5,type:"noteon",note:46,velocity:.8},{beat:2,type:"noteon",note:36,velocity:1},{beat:2.5,type:"noteon",note:42,velocity:.8},{beat:3,type:"noteon",note:38,velocity:.9},{beat:3.5,type:"noteon",note:46,velocity:.8},{beat:.05,type:"noteoff",note:36},{beat:.55,type:"noteoff",note:42},{beat:1.05,type:"noteoff",note:38},{beat:1.55,type:"noteoff",note:46},{beat:2.05,type:"noteoff",note:36},{beat:2.55,type:"noteoff",note:42},{beat:3.05,type:"noteoff",note:38},{beat:3.55,type:"noteoff",note:46}],Ga=[{beat:0,type:"noteon",note:36,velocity:.9},{beat:1,type:"noteon",note:38,velocity:.8},{beat:2,type:"noteon",note:41,velocity:.8},{beat:3,type:"noteon",note:43,velocity:.9},{beat:.9,type:"noteoff",note:36},{beat:1.9,type:"noteoff",note:38},{beat:2.9,type:"noteoff",note:41},{beat:3.9,type:"noteoff",note:43}],Ya=[{beat:0,type:"noteon",note:36,velocity:.9},{beat:.75,type:"noteon",note:43,velocity:.8},{beat:1.5,type:"noteon",note:38,velocity:.9},{beat:2.25,type:"noteon",note:41,velocity:.85},{beat:3,type:"noteon",note:43,velocity:.9},{beat:.65,type:"noteoff",note:36},{beat:1.4,type:"noteoff",note:43},{beat:2.15,type:"noteoff",note:38},{beat:2.9,type:"noteoff",note:41},{beat:3.65,type:"noteoff",note:43}],Ka=[{beat:0,type:"noteon",note:60,velocity:.8},{beat:0,type:"noteon",note:64,velocity:.8},{beat:0,type:"noteon",note:67,velocity:.8},{beat:2,type:"noteon",note:62,velocity:.8},{beat:2,type:"noteon",note:65,velocity:.8},{beat:2,type:"noteon",note:69,velocity:.8},{beat:1.95,type:"noteoff",note:60},{beat:1.95,type:"noteoff",note:64},{beat:1.95,type:"noteoff",note:67},{beat:3.95,type:"noteoff",note:62},{beat:3.95,type:"noteoff",note:65},{beat:3.95,type:"noteoff",note:69}],Qa=[{beat:0,type:"noteon",note:60,velocity:.75},{beat:0,type:"noteon",note:64,velocity:.75},{beat:0,type:"noteon",note:67,velocity:.75},{beat:1,type:"noteon",note:60,velocity:.7},{beat:1.5,type:"noteon",note:64,velocity:.7},{beat:2,type:"noteon",note:65,velocity:.75},{beat:2,type:"noteon",note:69,velocity:.75},{beat:3,type:"noteon",note:65,velocity:.7},{beat:3.5,type:"noteon",note:69,velocity:.7},{beat:.8,type:"noteoff",note:60},{beat:.8,type:"noteoff",note:64},{beat:.8,type:"noteoff",note:67},{beat:1.8,type:"noteoff",note:60},{beat:1.8,type:"noteoff",note:64},{beat:2.8,type:"noteoff",note:65},{beat:2.8,type:"noteoff",note:69},{beat:3.8,type:"noteoff",note:65},{beat:3.8,type:"noteoff",note:69}],Ja=[{beat:0,type:"noteon",note:72,velocity:.85},{beat:.5,type:"noteon",note:76,velocity:.8},{beat:1,type:"noteon",note:79,velocity:.8},{beat:1.5,type:"noteon",note:83,velocity:.85},{beat:2,type:"noteon",note:79,velocity:.85},{beat:2.5,type:"noteon",note:76,velocity:.8},{beat:3,type:"noteon",note:72,velocity:.8},{beat:3.5,type:"noteon",note:76,velocity:.85},{beat:.35,type:"noteoff",note:72},{beat:.85,type:"noteoff",note:76},{beat:1.35,type:"noteoff",note:79},{beat:1.85,type:"noteoff",note:83},{beat:2.35,type:"noteoff",note:79},{beat:2.85,type:"noteoff",note:76},{beat:3.35,type:"noteoff",note:72},{beat:3.85,type:"noteoff",note:76}],Xa=[{beat:.25,type:"noteon",note:74,velocity:.8},{beat:.75,type:"noteon",note:77,velocity:.8},{beat:1.25,type:"noteon",note:79,velocity:.8},{beat:1.75,type:"noteon",note:81,velocity:.8},{beat:2.25,type:"noteon",note:79,velocity:.8},{beat:2.75,type:"noteon",note:77,velocity:.8},{beat:3.25,type:"noteon",note:74,velocity:.8},{beat:3.75,type:"noteon",note:72,velocity:.8},{beat:.6,type:"noteoff",note:74},{beat:1.1,type:"noteoff",note:77},{beat:1.6,type:"noteoff",note:79},{beat:2.1,type:"noteoff",note:81},{beat:2.6,type:"noteoff",note:79},{beat:3.1,type:"noteoff",note:77},{beat:3.6,type:"noteoff",note:74},{beat:4.1,type:"noteoff",note:72}],Yn=[{key:"perc-classic",name:"Percusión 4/4",description:"Kick, caja y hats clásicos house.",category:"perc",phrase:ze("builtin-perc-classic","Percusión 4/4",qa)},{key:"perc-halftime",name:"Percusión halftime",description:"Bombo firme y caja a contratiempos.",category:"perc",phrase:ze("builtin-perc-halftime","Percusión halftime",Va)},{key:"bass-pulse",name:"Bajo pulsante",description:"Notas graves en negras.",category:"bass",phrase:ze("builtin-bass-pulse","Bajo pulsante",Ga)},{key:"bass-syncopated",name:"Bajo sincopado",description:"Movimiento en síncopas.",category:"bass",phrase:ze("builtin-bass-sync","Bajo sincopado",Ya)},{key:"chords-blocks",name:"Acordes alternos",description:"Bloques largos a dos compases.",category:"chords",phrase:ze("builtin-chords-blocks","Acordes alternos",Ka)},{key:"chords-rhythm",name:"Acordes rítmicos",description:"Patrón con stabs en corcheas.",category:"chords",phrase:ze("builtin-chords-rhythm","Acordes rítmicos",Qa)},{key:"lead-arp",name:"Lead arpegio",description:"Arpegio ascendente/descendente.",category:"melody",phrase:ze("builtin-lead-arp","Lead arpegio",Ja)},{key:"lead-counter",name:"Lead contrapunto",description:"Respuesta melódica en síncopas.",category:"melody",phrase:ze("builtin-lead-counter","Lead contrapunto",Xa)}];function Dn(r){return Yn.find(t=>t.key===r)??null}var Za=R('<span style="opacity:0.7;"> </span>'),eo=R('<p style="color:#ff6b6b; margin:0 0 0.6rem 0;"> </p>'),to=R('<!> <div style="display:flex; flex-wrap:wrap; gap:0.8rem; align-items:center;"><label for="soundfont-file" style="min-width:12rem;">Cargar SoundFont (.sf2/.sf3)</label> <input id="soundfont-file" type="file" accept=".sf2,.sf3" style="flex:1 1 220px; min-width:200px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"/> <button type="button" style="padding:0.55rem 1.1rem; border-radius:10px; background:#444; color:#fff; border:0;"> </button></div> <p style="opacity:0.65; margin:0.6rem 0 0 0;">Coloca <code style="background:#222; padding:0.1rem 0.35rem; border-radius:6px;">fluidsynth.js</code>, <code style="background:#222; padding:0.1rem 0.35rem; border-radius:6px;">fluidsynth.wasm</code> y un SoundFont GM en <code style="background:#222; padding:0.1rem 0.35rem; border-radius:6px;">static/fluidsynth/</code>, o carga uno manualmente.</p>',1),no=R('<p style="opacity:0.65; margin:-0.5rem 0 1.5rem 0;">Carga un SoundFont para habilitar la reproducción con FluidSynth.</p>'),ro=R('<th scope="col" style="text-align:center; padding:0.4rem 0.6rem; font-weight:600; opacity:0.7; border-bottom:1px solid #333;"> </th>'),ao=R("<option> </option>"),oo=R('<optgroup label="Packs guardados"></optgroup>'),io=R("<option> </option>"),so=R('<td><div style="display:flex; flex-direction:column; gap:0.35rem;"><select style="padding:0.35rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"><option>— Vacío —</option><optgroup label="Frase actual"><option> </option></optgroup><!><optgroup label="Frases base"></optgroup></select> <div style="display:flex; justify-content:space-between; align-items:center; gap:0.5rem;"><span style="opacity:0.6; font-size:0.75rem;"> </span> <div style="display:flex; gap:0.35rem; align-items:center;"><button type="button" title="Previsualizar esta frase" style="padding:0.25rem 0.5rem; border-radius:8px; background:#1e1e1e; color:#fff; border:1px solid #333; font-size:0.75rem;">▶</button> <button type="button" style="padding:0.25rem 0.6rem; border-radius:8px; background:#2c7efc; color:#fff; border:0; font-size:0.75rem;">Editar</button></div></div></div></td>'),lo=R('<tr><th scope="row" style="padding:0.6rem; text-align:left; border-bottom:1px solid #222;"><div style="display:flex; align-items:center; gap:0.6rem;"><span aria-hidden="true"></span> <span> </span> <button type="button" style="margin-left:auto; padding:0.25rem 0.6rem; border-radius:999px; font-size:0.75rem; background:#1f1f1f; color:#ddd; border:1px solid #333;">Vaciar pista</button></div></th><!></tr>'),uo=R('<span style="opacity:0.7;">Procesando…</span>'),co=R('<span style="opacity:0.7;"> </span>'),fo=R('<p style="color:#ff6b6b; margin:0 0 0.8rem 0;"> </p>'),po=R("<li> </li>"),mo=R('<div style="border:1px solid #2a2a2a; border-radius:10px; padding:0.8rem;"><h3 style="margin:0 0 0.5rem 0; font-size:1rem;">Metadatos extraídos</h3> <ul style="margin:0; padding-left:1.2rem; line-height:1.6;"><li> </li> <li> </li> <li> </li> <li> </li> <!></ul></div>'),yo=R('<p style="opacity:0.7;">Inicializando almacenamiento local…</p>'),ho=R('<p style="color:#ff6b6b; margin-bottom:0.8rem;"> </p>'),bo=R("<option> </option>"),vo=R('<p style="opacity:0.7;">No hay packs guardados todavía. Guarda el clip de ejemplo para crear el primero.</p>'),go=R('<p style="opacity:0.6; margin:0;">No hay frases en este pack.</p>'),_o=R('<span style="opacity:0.6; font-size:0.85rem;"> </span>'),wo=R('<li style="display:flex; align-items:center; gap:0.6rem;"><button type="button" style="padding:0.35rem 0.9rem; border-radius:8px; background:#2c7efc; color:#fff; border:0;"> </button> <span> </span> <!></li>'),xo=R('<ul style="list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:0.4rem;"></ul>'),ko=R('<li style="border:1px solid #2a2a2a; border-radius:10px; padding:0.8rem;"><div style="display:flex; justify-content:space-between; align-items:center; gap:0.6rem; margin-bottom:0.6rem;"><div><strong> </strong> <span style="opacity:0.6; font-size:0.85rem; margin-left:0.4rem;"> </span></div> <button type="button" style="padding:0.4rem 0.9rem; border-radius:8px; background:#c0392b; color:#fff; border:0;"> </button></div> <!></li>'),So=R('<ul style="list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:0.8rem;"></ul>'),Po=R('<!> <div style="display:grid; gap:1rem; margin-bottom:1.2rem;"><form style="display:flex; flex-wrap:wrap; gap:0.6rem; align-items:center;"><strong style="min-width:12rem;">Nuevo pack desde el clip actual</strong> <input type="text" placeholder="Nombre del pack" style="flex:1 1 160px; min-width:160px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"/> <input type="text" placeholder="Nombre de la frase" style="flex:1 1 160px; min-width:160px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"/> <button type="submit" style="padding:0.55rem 1.2rem; border-radius:10px; background:#27ae60; color:#fff; border:0;"> </button></form> <form style="display:flex; flex-wrap:wrap; gap:0.6rem; align-items:center;"><strong style="min-width:12rem;">Añadir al pack seleccionado</strong> <select style="flex:0 1 220px; min-width:160px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"><option disabled>Selecciona un pack</option><!></select> <input type="text" placeholder="Nombre de la frase" style="flex:1 1 160px; min-width:160px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"/> <button type="submit" style="padding:0.55rem 1.2rem; border-radius:10px; background:#f39c12; color:#fff; border:0;"> </button></form></div> <div><h3 style="font-size:1rem; margin:0 0 0.5rem 0;">Mis packs guardados</h3> <!></div>',1),Fo=R('<main class="p-6 min-h-screen" style="font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, sans-serif; background:#0b0b0b; color:#f2f2f2;"><h1 style="font-size:2rem; font-weight:700; margin-bottom:1rem;">DoReMix — PWA (SvelteKit)</h1> <p style="opacity:0.8; margin-bottom:1.5rem;">Demo: reproduce un pequeño "clip" de 1 compás con un sintetizador en AudioWorklet.</p> <section style="border:1px solid #333; border-radius:12px; padding:1.2rem; max-width:820px; margin-bottom:2rem;"><h2 style="font-size:1.2rem; margin:0 0 0.8rem 0;">Motor de sonido</h2> <div style="display:flex; flex-wrap:wrap; gap:0.8rem; align-items:center; margin-bottom:0.8rem;"><label for="engine-mode" style="min-width:8rem;">Modo</label> <select id="engine-mode" style="flex:0 1 240px; min-width:200px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"><option>Motor interno (seno simple)</option><option>FluidSynth + SoundFont GM</option></select> <!></div> <!></section> <div style="display:flex; gap:1rem; align-items:center; margin-bottom:1rem; flex-wrap:wrap;"><label for="bpm-input">BPM</label> <input id="bpm-input" type="number" min="40" max="240" style="width:5rem; padding:0.4rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"/> <label for="play-source">Reproducir</label> <select id="play-source" style="flex:0 1 220px; min-width:180px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"><option>Secuencia (todas las pistas)</option><option>Solo frase actual</option></select> <button style="padding:0.6rem 1rem; border-radius:10px; background:#2c7efc; color:#fff; border:0;">Play</button> <button style="padding:0.6rem 1rem; border-radius:10px; background:#444; color:#fff; border:0;">Stop</button></div> <!> <p style="opacity:0.7; margin-bottom:1.5rem;"> </p> <section style="border:1px solid #333; border-radius:12px; padding:1.2rem; max-width:1000px; margin-bottom:2rem;"><h2 style="font-size:1.2rem; margin:0 0 0.8rem 0;">Secuenciador por pistas</h2> <p style="opacity:0.75; margin:0 0 0.8rem 0;"> </p> <div style="overflow:auto;"><table style="width:100%; border-collapse:collapse; min-width:720px;"><thead><tr><th scope="col" style="text-align:left; padding:0.4rem 0.6rem; font-weight:600; opacity:0.8; border-bottom:1px solid #333;">Pista</th><!></tr></thead><tbody></tbody></table></div></section> <section style="border:1px solid #333; border-radius:12px; padding:1.2rem; max-width:820px; margin-bottom:2rem;"><h2 style="font-size:1.2rem; margin:0 0 0.8rem 0;">Importar SMF (.mid)</h2> <p style="opacity:0.75; margin-bottom:0.8rem;">Carga un archivo MIDI estándar para convertirlo en la frase activa.</p> <div style="display:flex; flex-wrap:wrap; gap:0.8rem; align-items:center; margin-bottom:0.8rem;"><label for="smf-file" style="min-width:8rem;">Archivo SMF</label> <input id="smf-file" type="file" accept=".mid,.midi" style="flex:1 1 240px; min-width:220px; padding:0.45rem; background:#181818; color:#fff; border:1px solid #333; border-radius:8px;"/> <!></div> <!> <!></section> <section style="border:1px solid #333; border-radius:12px; padding:1.2rem; max-width:820px; margin-bottom:2rem;"><h2 style="font-size:1.2rem; margin:0 0 0.8rem 0;">Packs de frases (IndexedDB / OPFS)</h2> <!></section> <div style="border:1px solid #333; border-radius:12px; padding:1rem; max-width:720px;"><h2 style="font-size:1.2rem; margin:0 0 0.5rem 0;">Qué incluye este esqueleto</h2> <ul style="line-height:1.6;"><li>AudioWorklet con sintetizador simple (seno) y <em>scheduler</em> básico</li> <li>VitePWA: manifest & service worker (instalable/offline)</li> <li>Página de prueba + controles</li></ul></div></main>');function Co(r,t){ya(t,!1);const n=()=>wa(Aa,"$phrasePacks",s),[s,l]=_a(),u=8,p=Array.from({length:u},(a,o)=>o),k=Yn.map(a=>({key:a.key,label:a.name,category:a.category,source:"builtin"})).sort((a,o)=>a.label.localeCompare(o.label,"es",{sensitivity:"base"}));let _,E,w=null,z=F("basic"),$=F("arrangement"),N=F({ready:!1,soundFontLoaded:!1,soundFontName:void 0,lastError:null}),v=F(null),M=F(!1),A=F("");const q="/fluidsynth/gm.sf2";let B=F(120),I=F(!1);const K=[{beat:0,type:"noteon",note:60,velocity:.8},{beat:.5,type:"noteoff",note:60},{beat:1,type:"noteon",note:64,velocity:.8},{beat:1.5,type:"noteoff",note:64},{beat:2,type:"noteon",note:67,velocity:.8},{beat:2.5,type:"noteoff",note:67},{beat:3,type:"noteon",note:72,velocity:.8},{beat:3.5,type:"noteoff",note:72}];let T=F({id:"default-phrase",name:"Clip demo",bpm:e(B),events:He(K)}),g=F(e(T).events),x=F(Kn()),V=F([]),re=F(0),Z=F(!1),O=F(null),Q=F("Pack demo"),ee=F(e(T).name),te=F(""),le=F(!1),we=F(!1),xe=F(null),ke=F(null),ot=F(null),ne=F(null),it=F(!1),st=F(""),oe=F([]),Ye=F([]),Ke=F(0),Pe=F(e(T).name),an=F(`${e(Pe)} (en edición)`),on=F("Sin SoundFont cargado"),gt=F(e(g).length>0),sn=F(!1),Re=F(null),Qe=null,ln=0,_t=0,Oe=F(Array(u).fill(0)),Je=F(Array(u).fill(0)),un=F(0),Fe=F(null),Ee=F(null),Xe=null;function Kn(){return[{id:"track-perc",name:"Percusión",color:"#f97316",category:"perc",slots:lt(["builtin:perc-classic"])},{id:"track-bass",name:"Bajo",color:"#22d3ee",category:"bass",slots:lt(["builtin:bass-pulse","builtin:bass-syncopated"])},{id:"track-chords",name:"Acordes",color:"#a855f7",category:"chords",slots:lt(["builtin:chords-blocks","builtin:chords-rhythm"])},{id:"track-lead",name:"Lead",color:"#f472b6",category:"melody",slots:lt(["builtin:lead-arp","builtin:lead-counter",null,"builtin:lead-arp"])}]}function lt(a){return Array.from({length:u},(o,c)=>a[c%a.length]??null)}function He(a){return a.map(o=>({...o}))}function cn(a){return{id:crypto.randomUUID(),name:a?.trim()||e(Pe),bpm:e(B),events:He(e(g))}}function Qn(a){const o=new Set;for(const c of a)c.slots.forEach((h,b)=>{h&&o.add(b)});return o.size}function ut(a,o,c){if(!a)return null;if(a==="current")return o;if(a.startsWith("builtin:")){const h=Dn(a.replace("builtin:",""));return h?h.phrase:null}if(a.startsWith("pack:")){const[,h,b]=a.split(":");return c.find(C=>C.id===h)?.phrases.find(C=>C.id===b)??null}return null}function Jn(a,o,c){if(!a)return"— Vacío —";if(a==="current")return`${o} (actual)`;if(a.startsWith("builtin:"))return Dn(a.replace("builtin:",""))?.name??"Frase base";if(a.startsWith("pack:")){const[,h,b]=a.split(":"),y=c.find(C=>C.id===h),S=y?.phrases.find(C=>C.id===b);return y&&S?`${y.name} · ${S.name}`:"Frase de pack"}return"Frase"}function dn(a){if(!a||!a.events.length)return 0;let o=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(const y of a.events)Number.isFinite(y.beat)&&(y.beat<o&&(o=y.beat),y.beat>c&&(c=y.beat));if(!Number.isFinite(c))return 0;Number.isFinite(o)||(o=0);const h=c-Math.min(o,0);return Math.max(h+.5,1)}function Xn(a,o,c){return p.map(h=>{let b=0,y=!1;for(const S of a){const C=ut(S.slots[h],o,c);if(!C)continue;y=!0;const W=dn(C);W>b&&(b=W)}return y?b:0})}function Zn(a){const o=[];let c=0;for(let h=0;h<a.length;h++)o.push(c),c+=a[h];return o}function fn(a,o){return o.category==="any"||a.category==="any"?!0:a.category===o.category}function pn(a,o){if(ct(),a!=="arrangement"||!_)return;ln=o;const c=60/e(B),h=e(un);if(_t=h,h<=0)return;const b=()=>{if(!_){ct();return}const S=_.currentTime-ln;if(S<0)i(Re,null);else{const C=S/c;if(C>=_t){i(Re,null),ct();return}let W=null;for(let H=0;H<e(Je).length;H++){const J=e(Je)[H],L=e(Oe)[H]??0,ce=J+L;if(!(L<=0)){if(C>=J&&C<ce){W=H;break}if(C<J&&W===null){W=H;break}}}i(Re,W)}Qe=requestAnimationFrame(b)};Qe=requestAnimationFrame(b)}function ct(){Qe!==null&&(cancelAnimationFrame(Qe),Qe=null),i(Re,null),_t=0}function mn(){Xe&&(clearTimeout(Xe),Xe=null),i(Fe,null),i(Ee,null)}function er(a,o,c,h){const b=[];return a.forEach(y=>{y.slots.forEach((S,C)=>{const W=ut(S,o,c);if(!W||!W.events.length)return;const H=h[C]??0;W.events.forEach(J=>{b.push({type:J.type,note:J.note,velocity:J.velocity,beat:J.beat+H})})})}),b.sort((y,S)=>y.beat===S.beat?y.type===S.type?y.note-S.note:y.type==="noteoff"?1:-1:y.beat-S.beat),b}function tr(a,o,c){i(x,e(x).map(h=>{if(h.id!==a)return h;const b=h.slots.map((y,S)=>S===o?c:y);return{...h,slots:b}}))}function nr(a){i(x,e(x).map(o=>o.id===a?{...o,slots:Array(u).fill(null)}:o))}function rr(a,o){const c=e(x).find(S=>S.id===a);if(!c)return;const h=c.slots[o],b=ut(h,e(T),e(oe));if(!b)return;const y=b.bpm??e(B);i(T,{...b,id:crypto.randomUUID(),bpm:y,events:He(b.events)}),i(g,e(T).events),i(B,y),i(ee,e(T).name),i(ne,null),i(st,"")}async function dt(){_||(_=new AudioContext({latencyHint:"interactive"})),w||(w=new Oa(_));try{await w.ensureInitialized(),i(N,w.getStatus()),i(v,e(N).lastError??null),e(N).soundFontLoaded&&i(A,w.getSoundFontName()??e(N).soundFontName??e(A))}catch(a){throw i(N,w.getStatus()),i(v,a.message??e(N).lastError??"No fue posible inicializar FluidSynth."),a}}async function ar(a){if(e(z)===a)return;await Le();const o=e(z);if(a==="fluid")try{await dt(),i(z,a)}catch{i(z,o);return}else i(z,a),i(v,null)}async function or(a){const c=a.currentTarget.value??"basic";await ar(c)}async function ir(a){const c=a.currentTarget.value??"arrangement";e($)!==c&&(i($,c),e(I)&&await Le())}async function yn(){if(_||(_=new AudioContext({latencyHint:"interactive"})),e(z)==="fluid"){await dt();return}E||(await _.audioWorklet.addModule("/engine.worklet.js"),E=new AudioWorkletNode(_,"doremix-synth"),E.connect(_.destination))}function hn(a,o=e(B)){if(!_||!E||!a.length)return null;const c=60/o,h=_.currentTime+.1,b=a.map(y=>({t:h+y.beat*c,type:y.type,note:y.note,velocity:y.velocity??0}));return E.port.postMessage({type:"schedule",events:b}),h}async function wt(){if(await Le(),await yn(),!_)return;await _.resume();const a=e($)==="arrangement"?e(V):e(g);if(!a.length)return;if(e(z)==="fluid"){if(!w){i(v,"FluidSynth no está inicializado.");return}if(!e(N).soundFontLoaded){i(v,"Carga un SoundFont GM (.sf2) antes de reproducir.");return}try{const c=await w.playClip(a,e(B));pn(e($),c),i(N,w.getStatus()),i(v,e(N).lastError??null),i(I,!0)}catch(c){i(v,c.message??w.getStatus().lastError??"Error al reproducir con FluidSynth.")}return}const o=hn(a);o!==null&&(pn(e($),o),i(I,!0))}async function Le(){if(ct(),mn(),!!_){if(e(z)==="fluid"){w&&await w.stop(),i(I,!1);return}if(!E){i(I,!1);return}E.port.postMessage({type:"allnotesoff"}),i(I,!1)}}async function sr(a,o){const c=e(x).find(H=>H.id===a);if(!c)return;const h=c.slots[o],b=ut(h,e(T),e(oe));if(!b||!b.events.length)return;const y=b.bpm??e(B),S=He(b.events),C=dn(b),W=C>0?C*6e4/y:0;if(await Le(),await yn(),!!_){await _.resume(),mn(),i(Fe,a),i(Ee,o);try{if(e(z)==="fluid"){if(!w){i(v,"FluidSynth no está inicializado.");return}await w.playClip(S,y),i(N,w.getStatus()),i(v,e(N).lastError??null)}else if(hn(S,y)===null){i(Fe,null),i(Ee,null),i(I,!1);return}i(I,!0);const H=Math.max(W+200,600);Xe=setTimeout(()=>{e(Fe)===a&&e(Ee)===o&&(i(Fe,null),i(Ee,null),i(I,!1)),Xe=null},H)}catch(H){i(Fe,null),i(Ee,null),i(I,!1),i(v,H.message??w?.getStatus().lastError??"Error al previsualizar la frase.")}}}async function lr(a){const o=a.currentTarget,c=o?.files?.[0];if(c){try{await dt()}catch{o.value="";return}if(w){i(M,!0),i(v,null);try{await w.loadSoundFontFromFile(c),i(N,w.getStatus()),i(v,e(N).lastError??null),i(A,w.getSoundFontName()??c.name)}catch(h){i(N,w.getStatus()),i(v,h.message??e(N).lastError??"No fue posible cargar el SoundFont.")}finally{i(M,!1),o.value=""}}}}async function ur(){try{await dt()}catch{return}if(w){i(M,!0),i(v,null);try{await w.loadSoundFontFromUrl(q,"gm.sf2"),i(N,w.getStatus()),i(v,e(N).lastError??null),i(A,w.getSoundFontName()??e(N).soundFontName??"gm.sf2")}catch(a){i(N,w.getStatus()),i(v,a.message??e(N).lastError??"No se pudo cargar el SoundFont predeterminado.")}finally{i(M,!1)}}}async function cr(){if(!(!e(Z)||e(le))){i(le,!0),i(O,null);try{const a=cn(e(ee)),o=await Ta({name:e(Q).trim()||"Pack sin nombre",phrases:[a]});i(te,o.id)}catch(a){i(O,a.message??"Error guardando pack")}finally{i(le,!1)}}}async function dr(){if(!(!e(te)||e(we))){i(we,!0),i(O,null);try{const a=cn(e(ee));await Ca(e(te),a)}catch(a){i(O,a.message??"Error guardando frase")}finally{i(we,!1)}}}async function fr(a,o){if(!e(xe)){i(xe,`${a}:${o}`),i(O,null);try{const c=await Ia(a,o);if(!c)return;const h=c.bpm??e(B);i(T,{...c,bpm:h,events:He(c.events)}),i(g,e(T).events),i(B,h),i(ee,c.name),e(I)&&(await Le(),await wt())}catch(c){i(O,c.message??"Error cargando frase")}finally{i(xe,null)}}}async function pr(a){if(!e(ke)){i(ke,a),i(O,null);try{await Ba(a),e(te)===a&&i(te,"")}catch(o){i(O,o.message??"Error eliminando pack")}finally{i(ke,null)}}}async function mr(a){const o=a.currentTarget,c=o?.files?.[0];if(c){i(it,!0),i(ot,null),i(ne,null),i(st,c.name);try{const h=await c.arrayBuffer(),b=$a(h);if(!b.events.length)throw new Error("El archivo no contiene notas.");const y=b.metadata.tempoBpm??e(B)??120,S=b.metadata.trackNames[0]||c.name.replace(/\.(mid|midi)$/i,"")||"Frase desde SMF",C=He(b.events);i(g,C),i(T,{id:crypto.randomUUID(),name:S,bpm:y,events:C}),i(B,y),i(ee,S),e(I)&&(await Le(),await wt()),i(ne,b.metadata),o.value=""}catch(h){i(ot,h.message??"No fue posible leer el archivo MIDI.")}finally{i(it,!1)}}}Or(async()=>{try{await at(),i(Z,!0)}catch(a){i(O,a.message??"No fue posible inicializar el almacenamiento local.")}}),ue(()=>n(),()=>{i(oe,n())}),ue(()=>e(oe),()=>{i(Ke,e(oe).length)}),ue(()=>e(T),()=>{i(Pe,e(T)?.name??"Clip actual")}),ue(()=>e(Pe),()=>{i(an,`${e(Pe)} (en edición)`)}),ue(()=>(e(Z),e(te),e(Ke),e(oe)),()=>{e(Z)&&!e(te)&&e(Ke)>0&&i(te,e(oe)[0].id)}),ue(()=>e(oe),()=>{i(Ye,e(oe).flatMap(a=>a.phrases.map(o=>({key:`pack:${a.id}:${o.id}`,label:`${a.name} · ${o.name}`,category:"any",source:"pack"}))).sort((a,o)=>a.label.localeCompare(o.label,"es",{sensitivity:"base"})))}),ue(()=>(e(x),e(T),e(oe)),()=>{i(Oe,Xn(e(x),e(T),e(oe)))}),ue(()=>e(Oe),()=>{i(Je,Zn(e(Oe)))}),ue(()=>e(Oe),()=>{i(un,e(Oe).reduce((a,o)=>a+o,0))}),ue(()=>(e(x),e(T),e(oe),e(Je)),()=>{i(V,er(e(x),e(T),e(oe),e(Je)))}),ue(()=>e(x),()=>{i(re,Qn(e(x)))}),ue(()=>(e($),e(V),e(g)),()=>{i(gt,e($)==="arrangement"?e(V).length>0:e(g).length>0)}),ue(()=>(e(gt),e(z),e(N),e(M)),()=>{i(sn,!e(gt)||e(z)==="fluid"&&(!e(N).ready||!e(N).soundFontLoaded||e(M)))}),ue(()=>(e(N),e(A)),()=>{i(on,e(N).soundFontLoaded?e(N).soundFontName??e(A)??"SoundFont cargado":"Sin SoundFont cargado")}),ha(),$r();var xt=Fo(),kt=m(f(xt),4),St=m(f(kt),2),Ne=m(f(St),2),Pt=f(Ne);Pt.value=Pt.__value="basic";var bn=m(Pt);bn.value=bn.__value="fluid",d(Ne);var vn;ht(Ne);var yr=m(Ne,2);{var hr=a=>{var o=Za(),c=f(o,!0);d(o),Y(()=>D(c,e(on))),U(a,o)};se(yr,a=>{e(z)==="fluid"&&a(hr)})}d(St);var br=m(St,2);{var vr=a=>{var o=to(),c=Gt(o);{var h=W=>{var H=eo(),J=f(H,!0);d(H),Y(()=>D(J,e(v))),U(W,H)};se(c,W=>{e(v)&&W(h)})}var b=m(c,2),y=m(f(b),2),S=m(y,2),C=f(S,!0);d(S),d(b),Cn(2),Y(()=>{y.disabled=e(M),S.disabled=e(M),D(C,e(M)?"Cargando…":"Usar /fluidsynth/gm.sf2")}),ie("change",y,lr),ie("click",S,ur),U(a,o)};se(br,a=>{e(z)==="fluid"&&a(vr)})}d(kt);var Ft=m(kt,2),Et=m(f(Ft),2);mt(Et);var Me=m(Et,4),Nt=f(Me);Nt.value=Nt.__value="arrangement";var gn=m(Nt);gn.value=gn.__value="phrase",d(Me);var _n;ht(Me);var Mt=m(Me,2),wn=m(Mt,2);d(Ft);var xn=m(Ft,2);{var gr=a=>{var o=no();U(a,o)};se(xn,a=>{e(z),e(N),P(()=>e(z)==="fluid"&&!e(N).soundFontLoaded)&&a(gr)})}var At=m(xn,2),_r=f(At);d(At);var Tt=m(At,2),Ct=m(f(Tt),2),wr=f(Ct);d(Ct);var kn=m(Ct,2),Sn=f(kn),Bt=f(Sn),Pn=f(Bt),xr=m(f(Pn));Be(xr,1,()=>p,Ce,(a,o)=>{var c=ro(),h=f(c);d(c),Y(()=>D(h,`Compás ${e(o)+1}`)),U(a,c)}),d(Pn),d(Bt);var Fn=m(Bt);Be(Fn,5,()=>e(x),Ce,(a,o)=>{var c=lo(),h=f(c),b=f(h),y=f(b),S=m(y,2),C=f(S,!0);d(S);var W=m(S,2);d(b),d(h);var H=m(h);Be(H,1,()=>p,Ce,(J,L)=>{var ce=so(),ve=f(ce),ae=f(ve),Se=f(ae);Se.value=Se.__value="";var De=m(Se),Ue=f(De),Dt=f(Ue,!0);d(Ue),Ue.value=Ue.__value="current",d(De);var ft=m(De);{var Ut=de=>{var fe=oo();Be(fe,5,()=>(e(Ye),e(o),P(()=>e(Ye).filter(he=>fn(he,e(o))))),Ce,(he,pe)=>{var ge=ao(),$t=f(ge,!0);d(ge);var pt={};Y(()=>{D($t,(e(pe),P(()=>e(pe).label))),pt!==(pt=(e(pe),P(()=>e(pe).key)))&&(ge.value=(ge.__value=(e(pe),P(()=>e(pe).key)))??"")}),U(he,ge)}),d(fe),U(de,fe)};se(ft,de=>{e(Ye),P(()=>e(Ye).length)&&de(Ut)})}var G=m(ft);Be(G,5,()=>(e(o),P(()=>k.filter(de=>fn(de,e(o))))),Ce,(de,fe)=>{var he=io(),pe=f(he,!0);d(he);var ge={};Y(()=>{D(pe,(e(fe),P(()=>e(fe).label))),ge!==(ge=(e(fe),P(()=>`builtin:${e(fe).key}`)))&&(he.value=(he.__value=(e(fe),P(()=>`builtin:${e(fe).key}`)))??"")}),U(de,he)}),d(G),d(ae);var X;ht(ae);var me=m(ae,2),j=f(me),Ae=f(j,!0);d(j);var We=m(j,2),$e=f(We),je=m($e,2);d(We),d(me),d(ve),d(ce),Y(de=>{Bn(ce,(e($),e(Re),e(L),e(Fe),e(o),e(Ee),P(()=>`padding:0.6rem; border-bottom:1px solid #222; background:${e($)==="arrangement"&&e(Re)===e(L)?"rgba(44,126,252,0.2)":e(Fe)===e(o).id&&e(Ee)===e(L)?"rgba(34,211,238,0.18)":"transparent"}; transition:background 0.2s ease;`))),D(Dt,e(an)),X!==(X=(e(o),e(L),P(()=>e(o).slots[e(L)]??"")))&&(ae.value=(ae.__value=(e(o),e(L),P(()=>e(o).slots[e(L)]??"")))??"",nt(ae,(e(o),e(L),P(()=>e(o).slots[e(L)]??"")))),D(Ae,de),$e.disabled=(e(o),e(L),e(I),P(()=>!e(o).slots[e(L)]||e(I))),je.disabled=(e(o),e(L),P(()=>!e(o).slots[e(L)]))},[()=>(e(o),e(L),e(Pe),e(oe),P(()=>Jn(e(o).slots[e(L)],e(Pe),e(oe))))]),ie("change",ae,de=>tr(e(o).id,e(L),de.currentTarget.value||null)),ie("click",$e,()=>sr(e(o).id,e(L))),ie("click",je,()=>rr(e(o).id,e(L))),U(J,ce)}),d(c),Y(()=>{Bn(y,(e(o),P(()=>`display:inline-block; width:0.9rem; height:0.9rem; border-radius:999px; background:${e(o).color};`))),D(C,(e(o),P(()=>e(o).name)))}),ie("click",W,()=>nr(e(o).id)),U(a,c)}),d(Fn),d(Sn),d(kn),d(Tt);var It=m(Tt,2),zt=m(f(It),4),Lt=m(f(zt),2),kr=m(Lt,2);{var Sr=a=>{var o=uo();U(a,o)},Pr=a=>{var o=va(),c=Gt(o);{var h=b=>{var y=co(),S=f(y);d(y),Y(()=>D(S,`Último archivo: ${e(st)??""}`)),U(b,y)};se(c,b=>{e(st)&&b(h)},!0)}U(a,o)};se(kr,a=>{e(it)?a(Sr):a(Pr,!1)})}d(zt);var En=m(zt,2);{var Fr=a=>{var o=fo(),c=f(o,!0);d(o),Y(()=>D(c,e(ot))),U(a,o)};se(En,a=>{e(ot)&&a(Fr)})}var Er=m(En,2);{var Nr=a=>{var o=mo(),c=m(f(o),2),h=f(c),b=f(h);d(h);var y=m(h,2),S=f(y);d(y);var C=m(y,2),W=f(C);d(C);var H=m(C,2),J=f(H);d(H);var L=m(H,2);{var ce=ve=>{var ae=po(),Se=f(ae);d(ae),Y(De=>D(Se,`Nombres de pista: ${De??""}`),[()=>(e(ne),P(()=>e(ne).trackNames.join(", ")))]),U(ve,ae)};se(L,ve=>{e(ne),P(()=>e(ne).trackNames.length)&&ve(ce)})}d(c),d(o),Y(ve=>{D(b,`Formato: ${e(ne),P(()=>e(ne).formatType)??""} (${e(ne),P(()=>e(ne).trackCount)??""} pistas)`),D(S,`Resolución: ${e(ne),P(()=>e(ne).ticksPerQuarter)??""} ticks por negra`),D(W,`BPM detectado: ${e(ne),P(()=>e(ne).tempoBpm??"sin meta tempo (usando actual)")??""}`),D(J,`Duración (compases aprox.): ${ve??""}`)},[()=>(e(ne),P(()=>Math.max(0,e(ne).durationBeats/4).toFixed(2)))]),U(a,o)};se(Er,a=>{e(ne)&&a(Nr)})}d(It);var Nn=m(It,2),Mr=m(f(Nn),2);{var Ar=a=>{var o=yo();U(a,o)},Tr=a=>{var o=Po(),c=Gt(o);{var h=G=>{var X=ho(),me=f(X,!0);d(X),Y(()=>D(me,e(O))),U(G,X)};se(c,G=>{e(O)&&G(h)})}var b=m(c,2),y=f(b),S=m(f(y),2);mt(S);var C=m(S,2);mt(C);var W=m(C,2),H=f(W,!0);d(W),d(y);var J=m(y,2),L=m(f(J),2);Y(()=>{e(te),ga(()=>{e(Ke),n()})});var ce=f(L);ce.value=ce.__value="";var ve=m(ce);Be(ve,1,n,Ce,(G,X)=>{var me=bo(),j=f(me,!0);d(me);var Ae={};Y(()=>{D(j,(e(X),P(()=>e(X).name))),Ae!==(Ae=(e(X),P(()=>e(X).id)))&&(me.value=(me.__value=(e(X),P(()=>e(X).id)))??"")}),U(G,me)}),d(L);var ae=m(L,2);mt(ae);var Se=m(ae,2),De=f(Se,!0);d(Se),d(J),d(b);var Ue=m(b,2),Dt=m(f(Ue),2);{var ft=G=>{var X=vo();U(G,X)},Ut=G=>{var X=So();Be(X,5,n,Ce,(me,j)=>{var Ae=ko(),We=f(Ae),$e=f(We),je=f($e),de=f(je,!0);d(je);var fe=m(je,2),he=f(fe,!0);d(fe),d($e);var pe=m($e,2),ge=f(pe,!0);d(pe),d(We);var $t=m(We,2);{var pt=Te=>{var Ze=go();U(Te,Ze)},Cr=Te=>{var Ze=xo();Be(Ze,5,()=>(e(j),P(()=>e(j).phrases)),Ce,(Br,be)=>{var Rt=wo(),et=f(Rt),Ir=f(et,!0);d(et);var Ot=m(et,2),zr=f(Ot,!0);d(Ot);var Lr=m(Ot,2);{var Dr=Ht=>{var Wt=_o(),Ur=f(Wt);d(Wt),Y(()=>D(Ur,`${e(be),P(()=>e(be).bpm)??""} BPM`)),U(Ht,Wt)};se(Lr,Ht=>{e(be),P(()=>e(be).bpm)&&Ht(Dr)})}d(Rt),Y(()=>{et.disabled=(e(xe),e(j),e(be),P(()=>e(xe)===`${e(j).id}:${e(be).id}`)),D(Ir,(e(xe),e(j),e(be),P(()=>e(xe)===`${e(j).id}:${e(be).id}`?"Cargando…":"Cargar"))),D(zr,(e(be),P(()=>e(be).name)))}),ie("click",et,()=>fr(e(j).id,e(be).id)),U(Br,Rt)}),d(Ze),U(Te,Ze)};se($t,Te=>{e(j),P(()=>!e(j).phrases.length)?Te(pt):Te(Cr,!1)})}d(Ae),Y(Te=>{D(de,(e(j),P(()=>e(j).name))),D(he,Te),pe.disabled=(e(ke),e(j),P(()=>e(ke)===e(j).id)),D(ge,(e(ke),e(j),P(()=>e(ke)===e(j).id?"Eliminando…":"Eliminar")))},[()=>(e(j),P(()=>new Date(e(j).updatedAt).toLocaleString()))]),ie("click",pe,()=>pr(e(j).id)),U(me,Ae)}),d(X),U(G,X)};se(Dt,G=>{n(),P(()=>!n().length)?G(ft):G(Ut,!1)})}d(Ue),Y(()=>{W.disabled=e(le),D(H,e(le)?"Guardando…":"Guardar como nuevo pack"),Na(ce,e(te)===""||e(Ke)===0),Se.disabled=!e(te)||e(we),D(De,e(we)?"Añadiendo…":"Añadir frase al pack")}),yt(S,()=>e(Q),G=>i(Q,G)),yt(C,()=>e(ee),G=>i(ee,G)),ie("submit",y,zn(cr)),Pa(L,()=>e(te),G=>i(te,G)),yt(ae,()=>e(ee),G=>i(ee,G)),ie("submit",J,zn(dr)),U(a,o)};se(Mr,a=>{e(Z)?a(Tr,!1):a(Ar)})}d(Nn),Cn(2),d(xt),Y(()=>{vn!==(vn=e(z))&&(Ne.value=(Ne.__value=e(z))??"",nt(Ne,e(z))),_n!==(_n=e($))&&(Me.value=(Me.__value=e($))??"",nt(Me,e($))),Mt.disabled=e(I)||e(sn),wn.disabled=!e(I),D(_r,`Frase actual: ${e(Pe)??""}`),D(wr,`Organiza hasta 8 compases (4 beats cada uno). Compases activos: ${e(re)??""}/8.`),Lt.disabled=e(it)}),ie("change",Ne,or),yt(Et,()=>e(B),a=>i(B,a)),ie("change",Me,ir),ie("click",Mt,wt),ie("click",wn,Le),ie("change",Lt,mr),U(r,xt),ba(),l()}export{Co as component};
